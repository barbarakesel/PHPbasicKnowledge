# Basic PHPknowledge :woman_technologist:
## SQL tasks PostgreSQL
package sql_tasks
_Northwind database_
### TASK1

1. Выбрать все записи заказов в которых наименование страны отгрузки начинается с 'U'

2. Выбрать записи заказов (включить колонки идентификатора заказа, идентификатора заказчика, веса и страны отгузки), которые должны быть отгружены в страны имя которых начинается с 'N', отсортировать по весу (по убыванию) и вывести только первые 10 записей.

3. Выбрать записи работников (включить колонки имени, фамилии, телефона, региона) в которых регион неизвестен

4. Подсчитать кол-во заказчиков регион которых известен

5. Подсчитать кол-во поставщиков в каждой из стран и отсортировать результаты группировки по убыванию кол-ва

6. Подсчитать суммарный вес заказов (в которых известен регион) по странам, затем отфильтровать по суммарному весу (вывести только те записи где суммарный вес больше 2750) и отсортировать по убыванию суммарного веса.

7. Выбрать все уникальные страны заказчиков и поставщиков и отсортировать страны по возрастанию

8. Выбрать такие страны в которых "зарегистированы" одновременно и заказчики и поставщики и работники.

9. Выбрать такие страны в которых "зарегистированы" одновременно заказчики и поставщики, но при этом в них не "зарегистрированы" работники.
   
### TASK2

1. Найти заказчиков и обслуживающих их заказы сотрудников таких, что и заказчики и сотрудники из города London, а доставка идёт компанией Speedy Express. Вывести компанию заказчика и ФИО сотрудника.

2. Найти активные (см. поле discontinued) продукты из категории Beverages и Seafood, которых в продаже менее 20 единиц. Вывести наименование продуктов, кол-во единиц в продаже, имя контакта поставщика и его телефонный номер.

3. Найти заказчиков, не сделавших ни одного заказа. Вывести имя заказчика и order_id.

4. Переписать предыдущий запрос, использовав симметричный вид джойна (подсказка: речь о LEFT и RIGHT).
### TASK3
1. Вывести продукты количество которых в продаже меньше самого малого среднего количества продуктов в деталях заказов (группировка по product_id). Результирующая таблица должна иметь колонки product_name и units_in_stock.
 
2. Напишите запрос, который выводит общую сумму фрахтов заказов для компаний-заказчиков для заказов, стоимость фрахта которых больше или равна средней величине стоимости фрахта всех заказов, а также дата отгрузки заказа должна находится во второй половине июля 1996 года. Результирующая таблица должна иметь колонки customer_id и freight_sum, строки которой должны быть отсортированы по сумме фрахтов заказов.

3. Напишите запрос, который выводит 3 заказа с наибольшей стоимостью, которые были созданы после 1 сентября 1997 года включительно и были доставлены в страны Южной Америки. Общая стоимость рассчитывается как сумма стоимости деталей заказа с учетом дисконта. Результирующая таблица должна иметь колонки customer_id, ship_country и order_price, строки которой должны быть отсортированы по стоимости заказа в обратном порядке.

4. Вывести все товары (уникальные названия продуктов), которых заказано ровно 10 единиц (конечно же, это можно решить и без подзапроса).

### TASK4
Напишите php-скрипт для заполнения базы данных Northwind (любая таблица) 1+ миллионом записей.
Создайте следующие индексы:
1. B-tree индекс для поиска по диапазонам
2. Hash индекс для поиска по точному значению
3. Составной индекс с использованием правил для хорошей селективности
Выполните запросы для выборки по проиндексированным полям, используйте _EXPLAIN ANALYZE_ для проверки использования индексов.
Сравните результаты выборки с индексами и без.
Для скрипта используйте php extension pdo, для создания качественных тестовых данных используйте пакет faker, установленный через composer.

 
